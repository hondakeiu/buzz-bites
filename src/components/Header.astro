<header class="header">
  <div class="inner inner--l">
    <ul>
      <li>
        <a href="/buzz-bites/">
          <span class="heart heart--ys"></span>
          <span class="text text--jp">トップ</span>
        </a>
      </li>
      <li>
        <a href="/buzz-bites/food/">
          <span class="heart heart--ys"></span>
          <span class="text text--jp">食材</span>
        </a>
      </li>
      <li>
        <a href="/buzz-bites/recipe/">
          <span class="heart heart--ys"></span>
          <span class="text text--jp">料理</span>
        </a>
      </li>
      <li>
        <a id="schedule-link">
          <span class="heart heart--ys"></span>
          <span class="text text--jp">目安量</span>
        </a>
      </li>
      <li>
        <a id="menu-link">
          <span class="heart heart--ys"></span>
          <span class="text text--jp">献立</span>
        </a>
      </li>
    </ul>
  </div>
</header>

<style lang="scss" is:global>
  .header {
    z-index: 10;
    position: fixed;
    display: flex;
    align-items: center;
    width: 100%;
    height: 6rem;
    bottom: 0;
    left: 0;
    background: var(--pink);
    ul {
      display: flex;
      column-gap: 1rem;
      li {
        flex: 1;
      }
      a {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0.5rem 0 0.3rem;
        .heart {
          width: 2.2rem;
          height: 2.2rem;
        }
        .text {
          font-size: 1rem;
          margin-top: 0.2rem;
        }
      }
    }
  }

  body:has(.home) .header a[href="/buzz-bites/"],
  body:has(.food) .header a[href="/buzz-bites/food/"],
  body:has(.recipe) .header a[href="/buzz-bites/recipe/"],
  body:has(.schedule) .header a[href^="/buzz-bites/schedule/"],
  body:has(.menu) .header a[href^="/buzz-bites/menu/"] {
    .heart {
      background-image: url("/buzz-bites/images/heart_rs.svg");
    }
  }
</style>

<script>
  import { getTodaySectionId } from "../scripts/utils/calendar";
  import { getWeekName } from "../scripts/utils/calendar";

  document.addEventListener("DOMContentLoaded", () => {
    const menuLink = document.querySelector(".header #menu-link")!;
    const scheduleLink = document.querySelector(".header #schedule-link")!;

    const today = getTodaySectionId();
    const week = getWeekName();

    menuLink.setAttribute("href", `/buzz-bites/menu/#${today}`);
    scheduleLink.setAttribute("href", `/buzz-bites/schedule/#week-${week}`);
  });
</script>
